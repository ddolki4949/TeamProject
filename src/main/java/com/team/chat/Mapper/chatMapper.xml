<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.chat.Mapper.chatMapper">

	<!-- 채팅 아이디 검색 결과 -->
	<select id="listAll" resultType="MemberVO">
		SELECT *
		FROM MEMBER
		WHERE ID LIKE CONCAT('%', #{keyword}, '%')
		ORDER BY ID
	</select>
	
	<!-- 채팅 내용 DB에 삽입 -->
	<insert id="insert">
		INSERT INTO TB_CHAT
		(CHAT_SENDER, CHAT_SENDCONTENT, CHAT_SENDTIME)
		VALUES
		(#{CHAT_SENDER}, #{CHAT_SENDCONTENT}, NOW())
	</insert>
	
	<!-- 채팅 아이디 자신 건지 체크 -->
	<select id="chatIdCheck" resultType="int" parameterType="String">
		SELECT COUNT(*) FROM MEMBER
		WHERE ID = #{CHAT_SENDER}
	</select>
	
	<select id="read" resultType="ChatVO" parameterType="ChatVO">
		SELECT * 
		FROM TB_CHAT
		ORDER BY CHAT_SENDTIME DESC limit 1
	</select>
</mapper>